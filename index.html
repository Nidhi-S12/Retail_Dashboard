<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Retail Trends Dashboard</title>
    
    <!-- React and React DOM from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.23.2/babel.min.js"></script>
    
    <!-- Tailwind CSS from CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js for data visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap');
        
        :root {
            /* Color Palette */
            --primary-blue: #0066cc;
            --primary-blue-light: #1a7ff0;
            --primary-blue-dark: #0052a3;
            --primary-blue-ultra-light: #e6f2ff;
            
            --accent-purple: #6366f1;
            --accent-purple-light: #8b5cf6;
            --accent-purple-dark: #4f46e5;
            --accent-purple-ultra-light: #eef2ff;
            
            --success-green: #10b981;
            --success-green-light: #34d399;
            --success-green-dark: #059669;
            --success-green-ultra-light: #ecfdf5;
            
            --warning-orange: #f59e0b;
            --warning-orange-light: #fbbf24;
            --warning-orange-dark: #d97706;
            --warning-orange-ultra-light: #fffbeb;
            
            --danger-red: #ef4444;
            --danger-red-light: #f87171;
            --danger-red-dark: #dc2626;
            --danger-red-ultra-light: #fef2f2;
            
            --neutral-gray: #6b7280;
            --neutral-gray-light: #9ca3af;
            --neutral-gray-dark: #4b5563;
            --neutral-gray-ultra-light: #f9fafb;
            
            /* Modern Color Palette Extensions */
            --emerald: #10b981;
            --cyan: #06b6d4;
            --indigo: #6366f1;
            --violet: #8b5cf6;
            --rose: #f43f5e;
            --amber: #f59e0b;
            
            /* Background Colors */
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-tertiary: #f1f5f9;
            --bg-quaternary: #e2e8f0;
            --bg-accent: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --bg-dark: #0f172a;
            --bg-glass: rgba(255, 255, 255, 0.8);
            --bg-glass-dark: rgba(0, 0, 0, 0.1);
            
            /* Text Colors */
            --text-primary: #0f172a;
            --text-secondary: #475569;
            --text-tertiary: #64748b;
            --text-light: #94a3b8;
            --text-inverse: #ffffff;
            --text-accent: #1e293b;
            
            /* Border & Shadow */
            --border-light: #e2e8f0;
            --border-medium: #cbd5e1;
            --border-dark: #94a3b8;
            --border-accent: #3b82f6;
            
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
            --shadow-2xl: 0 25px 50px -12px rgb(0 0 0 / 0.25);
            --shadow-inner: inset 0 2px 4px 0 rgb(0 0 0 / 0.05);
            --shadow-glow: 0 0 20px rgba(59, 130, 246, 0.15);
            --shadow-colored: 0 8px 30px rgba(99, 102, 241, 0.12);
            
            /* Glass Effects */
            --glass-bg: rgba(255, 255, 255, 0.25);
            --glass-border: rgba(255, 255, 255, 0.18);
            --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            
            /* Gradients */
            --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient-success: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --gradient-warning: linear-gradient(135deg, #ffa726 0%, #fb8c00 100%);
            --gradient-danger: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
            --gradient-dark: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            
            /* Spacing */
            --space-xs: 0.25rem;
            --space-sm: 0.5rem;
            --space-md: 1rem;
            --space-lg: 1.5rem;
            --space-xl: 2rem;
            --space-2xl: 3rem;
            --space-3xl: 4rem;
            
            /* Border Radius */
            --radius-sm: 0.375rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
            --radius-2xl: 1.5rem;
            --radius-full: 9999px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            background: var(--bg-secondary);
            background-image: 
                radial-gradient(circle at 25% 25%, rgba(99, 102, 241, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(16, 185, 129, 0.05) 0%, transparent 50%);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            font-feature-settings: 'kern' 1, 'liga' 1;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* Card Styling */
        .card {
            background: var(--bg-primary);
            border-radius: var(--radius-2xl);
            box-shadow: var(--shadow-md);
            border: 1px solid var(--border-light);
            transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
            overflow: hidden;
            position: relative;
        }
        
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-blue), var(--accent-purple), var(--success-green));
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: var(--shadow-2xl);
            border-color: var(--primary-blue-light);
        }
        
        .card:hover::before {
            opacity: 1;
        }
        
        /* Glass Morphism Card Variant */
        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            box-shadow: var(--glass-shadow);
            border-radius: var(--radius-2xl);
        }
        
        /* Enhanced Trending Badge */
        .trending-badge {
            position: absolute;
            top: var(--space-md);
            right: var(--space-md);
            background: linear-gradient(135deg, var(--danger-red), var(--warning-orange));
            color: var(--text-inverse);
            border-radius: var(--radius-full);
            padding: var(--space-sm) var(--space-md);
            font-size: 0.75rem;
            font-weight: 700;
            box-shadow: var(--shadow-lg);
            z-index: 10;
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            backdrop-filter: blur(10px);
            animation: pulse-glow 2s ease-in-out infinite alternate;
        }
        
        @keyframes pulse-glow {
            from { box-shadow: var(--shadow-lg), 0 0 20px rgba(239, 68, 68, 0.3); }
            to { box-shadow: var(--shadow-xl), 0 0 30px rgba(239, 68, 68, 0.5); }
        }
        
        .trending-badge::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: inherit;
            padding: 1px;
            background: linear-gradient(135deg, var(--danger-red), var(--warning-orange));
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: exclude;
            -webkit-mask-composite: exclude;
        }
        
        /* Premium Header Design */
        .dashboard-header {
            background: linear-gradient(135deg, #0066cc 0%, #667eea 25%, #764ba2 75%, #0052a3 100%);
            background-size: 200% 200%;
            animation: gradientShift 8s ease infinite;
            position: relative;
            overflow: hidden;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
            z-index: 1;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .dashboard-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3Cpattern id='hexGrid' width='30' height='26' patternUnits='userSpaceOnUse'%3E%3Cpath d='M15 0l7.5 4.33v8.67L15 17.32l-7.5-4.33V4.33z' fill='none' stroke='rgba(255,255,255,0.1)' stroke-width='0.5'/%3E%3C/pattern%3E%3C/defs%3E%3Crect width='100%25' height='100%25' fill='url(%23hexGrid)'/%3E%3C/svg%3E");
            opacity: 0.15;
            z-index: 0;
        }
        
        .dashboard-header::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 30% 40%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.08) 0%, transparent 50%),
                        radial-gradient(circle at 40% 80%, rgba(255, 255, 255, 0.06) 0%, transparent 50%);
            z-index: 1;
        }
        
        .dashboard-header .content,
        .dashboard-header > .container,
        .dashboard-header > .container > * {
            position: relative;
            z-index: 10;
        }
        
        .dashboard-title {
            font-size: clamp(1.875rem, 4vw, 3rem);
            font-weight: 900;
            color: #ffffff !important;
            text-shadow: 2px 4px 12px rgba(0, 0, 0, 0.4);
            letter-spacing: -0.025em;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%);
            background-clip: text;
            -webkit-background-clip: text;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
        }
        
        .dashboard-subtitle {
            color: rgba(255, 255, 255, 0.95) !important;
            font-weight: 500;
            font-size: 1.125rem;
            text-shadow: 1px 2px 8px rgba(0, 0, 0, 0.3);
            margin-bottom: 0;
            opacity: 0.95;
        }
        
        /* Ensure all header text is visible with strong specificity */
        .dashboard-header h1,
        .dashboard-header p,
        .dashboard-header span {
            color: #ffffff !important;
        }
        
        .dashboard-header .text-white {
            color: #ffffff !important;
        }
        
        /* Add a semi-transparent overlay to ensure text contrast */
        .dashboard-header .container {
            position: relative;
            backdrop-filter: blur(2px);
        }
        
        .dashboard-header .container::before {
            content: '';
            position: absolute;
            top: -2rem;
            left: -2rem;
            right: -2rem;
            bottom: -2rem;
            background: rgba(0, 0, 0, 0.05);
            border-radius: 1rem;
            z-index: 1;
            pointer-events: none;
        }
        
        .dashboard-header .container > * {
            position: relative;
            z-index: 20;
        }
        
        /* Enhanced Recommendation Badges */
        .recommendation-high {
            background: linear-gradient(135deg, var(--success-green), var(--success-green-light));
            border: 1px solid var(--success-green-ultra-light);
            color: var(--text-inverse);
            font-weight: 700;
            box-shadow: var(--shadow-lg), 0 0 20px rgba(16, 185, 129, 0.3);
        }
        
        .recommendation-moderate {
            background: linear-gradient(135deg, var(--warning-orange), var(--warning-orange-light));
            border: 1px solid var(--warning-orange-ultra-light);
            color: var(--text-inverse);
            font-weight: 700;
            box-shadow: var(--shadow-lg), 0 0 20px rgba(245, 158, 11, 0.3);
        }
        
        .recommendation-caution {
            background: linear-gradient(135deg, var(--danger-red), var(--danger-red-light));
            border: 1px solid var(--danger-red-ultra-light);
            color: var(--text-inverse);
            font-weight: 700;
            box-shadow: var(--shadow-lg), 0 0 20px rgba(239, 68, 68, 0.3);
        }
        
        .recommendation-standard {
            background: linear-gradient(135deg, var(--neutral-gray), var(--neutral-gray-light));
            border: 1px solid var(--neutral-gray-ultra-light);
            color: var(--text-inverse);
            font-weight: 700;
            box-shadow: var(--shadow-lg);
        }
        
        
        /* Product Cards */
        .product-card {
            background: var(--bg-primary);
            border-radius: var(--radius-2xl);
            border: 1px solid var(--border-light);
            overflow: hidden;
            position: relative;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
            transform-origin: center;
        }
        
        .product-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-blue), var(--accent-purple), var(--success-green));
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .product-card:hover {
            transform: translateY(-12px) scale(1.03);
            box-shadow: var(--shadow-2xl);
            border-color: var(--primary-blue-light);
        }
        
        .product-card:hover::before {
            opacity: 1;
        }
        
        /* Premium Metrics Cards */
        .metric-card {
            background: var(--bg-primary);
            border-radius: var(--radius-2xl);
            padding: var(--space-2xl);
            box-shadow: var(--shadow-md);
            border: 1px solid var(--border-light);
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .metric-card::after {
            content: '';
            position: absolute;
            top: -50px;
            right: -50px;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, var(--primary-blue-ultra-light), var(--accent-purple-ultra-light));
            border-radius: 50%;
            opacity: 0.6;
            transition: all 0.3s ease;
        }
        
        .metric-card:hover::after {
            transform: scale(1.5);
            opacity: 0.8;
        }
        
        .metric-value {
            font-size: clamp(2rem, 5vw, 2.5rem);
            font-weight: 800;
            color: var(--text-primary);
            line-height: 1;
            margin-bottom: var(--space-sm);
            position: relative;
            z-index: 1;
            font-family: 'JetBrains Mono', monospace;
        }
        
        .metric-label {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            position: relative;
            z-index: 1;
        }
        
        .metric-change {
            font-size: 0.75rem;
            font-weight: 700;
            margin-top: var(--space-sm);
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            position: relative;
            z-index: 1;
        }
        
        .metric-change.positive {
            color: var(--success-green);
        }
        
        .metric-change.negative {
            color: var(--danger-red);
        }
        
        
        /* Premium Form Controls */
        .form-select {
            appearance: none;
            background: var(--bg-primary);
            border: 2px solid var(--border-light);
            border-radius: var(--radius-xl);
            padding: 14px 50px 14px 18px;
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--text-primary);
            transition: all 0.3s ease;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 16px center;
            background-repeat: no-repeat;
            background-size: 16px;
            box-shadow: var(--shadow-sm);
            cursor: pointer;
            position: relative;
            z-index: 10;
            height: 50px;
            line-height: 1.2;
            display: flex;
            align-items: center;
            vertical-align: middle;
        }
        
        .form-select:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.1), var(--shadow-md);
            transform: translateY(-1px);
        }

        .form-select:hover {
            border-color: var(--border-medium);
            box-shadow: var(--shadow-md);
        }

        /* Better option styling */
        .form-select option {
            padding: 8px 12px;
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text-primary);
            background: var(--bg-primary);
        }        .form-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--space-sm);
            letter-spacing: 0.025em;
        }
        
        /* Enhanced Toggle Switch */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 56px;
            height: 28px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--border-medium);
            transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: var(--radius-full);
            box-shadow: var(--shadow-inner);
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 3px;
            bottom: 3px;
            background: var(--bg-primary);
            transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 50%;
            box-shadow: var(--shadow-md);
        }
        
        input:checked + .toggle-slider {
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-purple));
            box-shadow: 0 0 20px rgba(0, 102, 204, 0.3);
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(28px);
        }
        
        
        /* Chart Container Enhancement */
        .chart-container {
            position: relative;
            height: 280px;
            width: 100%;
            padding: var(--space-lg);
            background: var(--bg-primary);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-inner);
            border: 1px solid var(--border-light);
        }
        
        /* Premium Loading Animation */
        .skeleton-loader {
            background: linear-gradient(90deg, var(--neutral-gray-ultra-light) 25%, var(--border-light) 50%, var(--neutral-gray-ultra-light) 75%);
            background-size: 200% 100%;
            animation: shimmer 2s infinite;
            border-radius: var(--radius-md);
        }
        
        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        /* Enhanced Button Styles */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: var(--space-md) var(--space-xl);
            font-size: 0.875rem;
            font-weight: 700;
            border-radius: var(--radius-xl);
            border: none;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-decoration: none;
            gap: var(--space-sm);
            position: relative;
            overflow: hidden;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .btn:hover::before {
            left: 100%;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-purple));
            color: var(--text-inverse);
            box-shadow: var(--shadow-lg);
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-xl);
        }
        
        .btn-secondary {
            background: var(--bg-primary);
            color: var(--text-primary);
            border: 2px solid var(--border-medium);
            box-shadow: var(--shadow-md);
        }
        
        .btn-secondary:hover {
            background: var(--bg-secondary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        /* Modal Styling */
        .modal-overlay {
            backdrop-filter: blur(8px);
            background: rgba(15, 23, 42, 0.6);
        }
        
        .modal-content {
            background: var(--bg-white);
            border-radius: 20px;
            box-shadow: var(--shadow-xl);
            border: 1px solid var(--border-light);
        }
        
        /* Professional Tab Navigation */
        .tab-nav {
            background: #f8fafc;
            border-radius: 12px;
            padding: 4px;
            margin-bottom: 24px;
        }
        
        .tab-button {
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.875rem;
            font-weight: 500;
            border: none;
            background: none;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .tab-button.active {
            background: var(--bg-white);
            color: var(--text-primary);
            box-shadow: var(--shadow-sm);
        }
        
        /* Professional Badge Styles */
        .badge {
            display: inline-flex;
            align-items: center;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            gap: 4px;
        }
        
        .badge-primary {
            background: rgba(59, 130, 246, 0.1);
            color: var(--primary-blue);
            border: 1px solid rgba(59, 130, 246, 0.2);
        }
        
        .badge-success {
            background: rgba(5, 150, 105, 0.1);
            color: var(--success-green);
            border: 1px solid rgba(5, 150, 105, 0.2);
        }
        
        .badge-warning {
            background: rgba(217, 119, 6, 0.1);
            color: var(--warning-orange);
            border: 1px solid rgba(217, 119, 6, 0.2);
        }
        
        /* Responsive Design Enhancements */
        @media (max-width: 768px) {
            .card {
                border-radius: var(--radius-xl);
            }
            
            .metric-value {
                font-size: 2rem;
            }
            
            .product-card {
                border-radius: var(--radius-xl);
            }
            
            .dashboard-title {
                font-size: 2rem;
            }
            
            .metric-card {
                padding: var(--space-lg);
            }
        }
        
        /* Professional Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--bg-tertiary);
            border-radius: var(--radius-sm);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--border-medium);
            border-radius: var(--radius-sm);
            transition: background 0.3s ease;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--neutral-gray);
        }
        
        /* Enhanced Focus States */
        *:focus {
            outline: 2px solid var(--primary-blue);
            outline-offset: 2px;
        }
        
        /* Improved Typography */
        h1, h2, h3, h4, h5, h6 {
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1.2;
        }
        
        p {
            color: var(--text-secondary);
            line-height: 1.6;
        }
        
        /* Enhanced Footer */
        footer {
            background: linear-gradient(135deg, var(--bg-dark) 0%, #1e293b 100%);
            border-top: 1px solid var(--border-medium);
        }
        
        /* Loading States */
        .loading-shimmer {
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        
        /* Accessibility Improvements */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
        
        /* Dark mode support (future enhancement) */
        @media (prefers-color-scheme: dark) {
            :root {
                --bg-primary: #1e293b;
                --bg-secondary: #0f172a;
                --text-primary: #f1f5f9;
                --text-secondary: #cbd5e1;
                --border-light: #334155;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <!-- Load our data -->
    <script type="text/babel">
         // This will be replaced with actual data from our Python script
         let retailTrendsData = [];
         
         // Fetch data from JSON file
         fetch('./data/retail_trends_data.json')
             .then(response => response.json())
             .then(data => {
                 retailTrendsData = data;
                 console.log('Data loaded successfully:', retailTrendsData.length, 'entries');
                 // Render app after data is loaded
                 const root = ReactDOM.createRoot(document.getElementById('root'));
                 root.render(<App data={retailTrendsData} />);
             })
             .catch(error => {
                 console.error('Error loading data:', error);
                 // Show error message or load fallback data
                 alert('Error loading data. Please check console for details.');
             });
    </script>
    
    <!-- React Application -->
    <script type="text/babel">
        // Main App Component
        const App = ({ data }) => {
            console.log('App component rendering with data:', data?.length || 0, 'entries');
            
            const [selectedRegion, setSelectedRegion] = React.useState('All');
            const [selectedCategory, setSelectedCategory] = React.useState('All');
            const [showTrending, setShowTrending] = React.useState(false);
            const [selectedProduct, setSelectedProduct] = React.useState(null);
            const [isDataLoaded, setIsDataLoaded] = React.useState(false);
            
            // Extract unique regions from data
            const allRegions = React.useMemo(() => {
                if (!data || data.length === 0) return [];
                
                const regions = [...new Set(data.map(item => item.region))];
                const regionTypes = [...new Set(data.map(item => item.region_type))];
                
                console.log('Available regions:', regions);
                console.log('Available region types:', regionTypes);
                
                return [
                    { value: 'All', label: 'All Regions' },
                    ...regionTypes.map(type => ({ 
                        value: `type:${type}`, 
                        label: `${type} Cities` 
                    })),
                    ...regions.map(region => ({ value: region, label: region }))
                ];
            }, [data]);
            
            console.log('All regions computed:', allRegions);
            
            // Extract unique categories from data
            const allCategories = React.useMemo(() => {
                if (!data || data.length === 0) return [];
                
                const categories = [...new Set(data.map(item => item.category))];
                console.log('Available categories:', categories);
                
                return [
                    { value: 'All', label: 'All Categories' },
                    ...categories.map(category => ({ value: category, label: category }))
                ];
            }, [data]);
            
            // Filter data based on selected filters
            const filteredData = React.useMemo(() => {
                if (!data || data.length === 0) return [];
                
                console.log('Filtering with:', { selectedRegion, selectedCategory, showTrending });
                
                let filtered = [...data];
                
                // Filter by region
                if (selectedRegion !== 'All') {
                    if (selectedRegion.startsWith('type:')) {
                        const regionType = selectedRegion.split(':')[1];
                        filtered = filtered.filter(item => item.region_type === regionType);
                    } else {
                        filtered = filtered.filter(item => item.region === selectedRegion);
                    }
                }
                
                // Filter by category
                if (selectedCategory !== 'All') {
                    filtered = filtered.filter(item => item.category === selectedCategory);
                }
                
                // Filter by trending status
                if (showTrending) {
                    filtered = filtered.filter(item => item.is_trending);
                }
                
                console.log('Filtered data count:', filtered.length);
                
                return filtered;
            }, [data, selectedRegion, selectedCategory, showTrending]);
            
            // Group data by product name for aggregated metrics
            const productSummary = React.useMemo(() => {
                if (!filteredData || filteredData.length === 0) return [];
                
                const summary = {};
                
                filteredData.forEach(item => {
                    if (!summary[item.name]) {
                        summary[item.name] = {
                            id: item.id,
                            name: item.name,
                            category: item.category,
                            totalMentions: 0,
                            regions: new Set(),
                            isTrending: false,
                            positiveSentiment: 0,
                            neutralSentiment: 0,
                            negativeSentiment: 0,
                            overallSentiment: 0,
                            data: []
                        };
                    }
                    
                    const product = summary[item.name];
                    product.totalMentions += item.total_mentions;
                    product.regions.add(item.region);
                    product.isTrending = product.isTrending || item.is_trending;
                    product.positiveSentiment += item.sentiment_counts.positive;
                    product.neutralSentiment += item.sentiment_counts.neutral;
                    product.negativeSentiment += item.sentiment_counts.negative;
                    product.data.push(item);
                });
                
                // Calculate overall sentiment score and format data
                Object.values(summary).forEach(product => {
                    const total = product.positiveSentiment + product.neutralSentiment + product.negativeSentiment;
                    product.positiveSentimentPercent = total > 0 ? (product.positiveSentiment / total * 100).toFixed(1) : 0;
                    product.neutralSentimentPercent = total > 0 ? (product.neutralSentiment / total * 100).toFixed(1) : 0;
                    product.negativeSentimentPercent = total > 0 ? (product.negativeSentiment / total * 100).toFixed(1) : 0;
                    
                    product.overallSentiment = total > 0 ? 
                        ((product.positiveSentiment * 1) + (product.neutralSentiment * 0) + (product.negativeSentiment * -1)) / total : 0;
                    
                    product.regionsCount = product.regions.size;
                    product.regions = Array.from(product.regions);
                });
                
                // Sort products by total mentions or trending status
                let summaryList = Object.values(summary).sort((a, b) => {
                    if (a.isTrending && !b.isTrending) return -1;
                    if (!a.isTrending && b.isTrending) return 1;
                    return b.totalMentions - a.totalMentions;
                });
                
                // When showing trending across all regions, limit to top 3 trending products per category
                if (showTrending && selectedRegion === 'All') {
                    const groupedByCategory = summaryList.reduce((acc, prod) => {
                        acc[prod.category] = acc[prod.category] || [];
                        acc[prod.category].push(prod);
                        return acc;
                    }, {});
                    summaryList = Object.values(groupedByCategory).flatMap(list => list.slice(0, 3));
                }
                
                return summaryList;
            }, [filteredData, showTrending, selectedRegion]);
            
            // Simulate loading data
            React.useEffect(() => {
                const timer = setTimeout(() => {
                    setIsDataLoaded(true);
                }, 1500);
                
                return () => clearTimeout(timer);
            }, []);
            
            // Handle product click
            const handleProductClick = (product) => {
                console.log('Product clicked:', product.name);
                setSelectedProduct(product);
                window.scrollTo({ top: 0, behavior: 'smooth' });
            };
            
            // Close product detail modal
            const closeProductDetail = () => {
                setSelectedProduct(null);
            };
            
            // Get recommendation class based on recommendation text
            const getRecommendationClass = (recommendation) => {
                if (recommendation.includes('High Demand')) return 'recommendation-high';
                if (recommendation.includes('Moderate Demand')) return 'recommendation-moderate';
                if (recommendation.includes('Caution')) return 'recommendation-caution';
                return 'recommendation-standard';
            };
            
            return (
                <div className="min-h-screen bg-gray-50">
                    {/* Header */}
                    <header className="dashboard-header text-white p-8 shadow-xl">
                        <div className="container mx-auto relative z-10">
                            <div className="flex flex-col lg:flex-row justify-between items-center">
                                <div className="text-center lg:text-left mb-6 lg:mb-0">
                                    <h1 className="dashboard-title mb-3">Indian Retail Trends</h1>
                                    <p className="dashboard-subtitle mb-4">AI-Powered Social Media Insights Dashboard for Modern Retailers</p>
                                    <div className="mt-6 flex items-center justify-center lg:justify-start gap-4">
                                        <div className="flex items-center gap-2 bg-black bg-opacity-30 px-4 py-2 rounded-full backdrop-blur-md border border-white border-opacity-40 shadow-lg">
                                            <div className="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                                            <span className="text-sm font-semibold text-white">Live Data</span>
                                        </div>
                                        <div className="flex items-center gap-2 bg-black bg-opacity-30 px-4 py-2 rounded-full backdrop-blur-md border border-white border-opacity-40 shadow-lg">
                                            <svg className="w-4 h-4 text-green-400" fill="currentColor" viewBox="0 0 20 20">
                                                <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clipRule="evenodd" />
                                            </svg>
                                            <span className="text-sm font-semibold text-white">Verified</span>
                                        </div>
                                    </div>
                                </div>
                                <div className="text-center lg:text-right">
                                    <div className="bg-black bg-opacity-30 px-6 py-4 rounded-2xl backdrop-blur-md border border-white border-opacity-40 shadow-lg">
                                        <p className="text-sm opacity-90 mb-1 text-white">
                                            <span className="font-semibold">Last Updated:</span>
                                        </p>
                                        <p className="text-lg font-bold text-white">
                                            {new Date().toLocaleDateString('en-IN', { 
                                                weekday: 'long',
                                                year: 'numeric', 
                                                month: 'long', 
                                                day: 'numeric' 
                                            })}
                                        </p>
                                        <p className="text-sm opacity-75 mt-1 text-white">
                                            {new Date().toLocaleTimeString('en-IN', { 
                                                hour: '2-digit', 
                                                minute: '2-digit'
                                            })}
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </header>
                    
                    {/* Main Content */}
                    <main className="container mx-auto px-6 py-12">
                        {/* Product Detail Modal */}
                        {selectedProduct && (
                            <ProductDetailModal 
                                product={selectedProduct} 
                                onClose={closeProductDetail}
                                getRecommendationClass={getRecommendationClass}
                            />
                        )}
                        
                        {/* Filters Section */}
                        <div className="glass-card p-8 mb-12 border-0 shadow-xl">
                            <div className="flex items-center justify-between mb-8">
                                <div>
                                    <h2 className="text-3xl font-bold text-gray-900 mb-3 bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent">
                                        Explore Retail Intelligence
                                    </h2>
                                    <p className="text-lg text-gray-600 leading-relaxed">
                                        Discover data-driven insights tailored to your business objectives and market strategy
                                    </p>
                                </div>
                                <div className="hidden lg:flex items-center gap-4">
                                    <div className="flex items-center gap-3 bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-3 rounded-full shadow-sm border border-blue-100">
                                        <div className="w-3 h-3 bg-blue-500 rounded-full animate-pulse"></div>
                                        <span className="text-sm font-semibold text-blue-700">{filteredData.length} Products</span>
                                    </div>
                                    <div className="flex items-center gap-3 bg-gradient-to-r from-emerald-50 to-green-50 px-6 py-3 rounded-full shadow-sm border border-emerald-100">
                                        <div className="w-3 h-3 bg-emerald-500 rounded-full animate-pulse"></div>
                                        <span className="text-sm font-semibold text-emerald-700">{productSummary.filter(p => p.isTrending).length} Trending</span>
                                    </div>
                                    <div className="flex items-center gap-3 bg-gradient-to-r from-amber-50 to-yellow-50 px-6 py-3 rounded-full shadow-sm border border-amber-100">
                                        <div className="w-3 h-3 bg-amber-500 rounded-full"></div>
                                        <span className="text-sm font-semibold text-amber-700">📍 {selectedRegion}</span>
                                    </div>
                                    <div className="flex items-center gap-3 bg-gradient-to-r from-purple-50 to-violet-50 px-6 py-3 rounded-full shadow-sm border border-purple-100">
                                        <div className="w-3 h-3 bg-purple-500 rounded-full"></div>
                                        <span className="text-sm font-semibold text-purple-700">🏷️ {selectedCategory}</span>
                                    </div>
                                </div>
                            </div>
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                                {/* Region Filter */}
                                <div className="space-y-3">
                                    <label className="form-label text-base font-semibold text-gray-700 flex items-center gap-2">
                                        <span className="text-2xl">📍</span>
                                        Geographic Region
                                    </label>
                                    <select 
                                        className="form-select w-full text-base font-medium"
                                        value={selectedRegion}
                                        onClick={() => console.log('Region select clicked!')}
                                        onChange={(e) => {
                                            console.log('Region changed to:', e.target.value);
                                            setSelectedRegion(e.target.value);
                                        }}
                                    >
                                        <option value="All">🌍 All Regions</option>
                                        {allRegions.slice(1).map((region) => (
                                            <option key={region.value} value={region.value}>
                                                {region.label}
                                            </option>
                                        ))}
                                    </select>
                                </div>
                                
                                {/* Category Filter */}
                                <div className="space-y-3">
                                    <label className="form-label text-base font-semibold text-gray-700 flex items-center gap-2">
                                        <span className="text-2xl">🏷️</span>
                                        Product Category
                                    </label>
                                    <select 
                                        className="form-select w-full text-base font-medium"
                                        value={selectedCategory}
                                        onClick={() => console.log('Category select clicked!')}
                                        onChange={(e) => {
                                            console.log('Category changed to:', e.target.value);
                                            setSelectedCategory(e.target.value);
                                        }}
                                    >
                                        {allCategories.map((category) => (
                                            <option key={category.value} value={category.value}>
                                                {category.label}
                                            </option>
                                        ))}
                                    </select>
                                </div>
                                
                                {/* Trending Toggle */}
                                <div className="flex flex-col justify-between">
                                    <label className="form-label text-base font-semibold text-gray-700 flex items-center gap-2 mb-3">
                                        <span className="text-2xl">🔥</span>
                                        Trending Filter
                                    </label>
                                    <div className="flex items-center gap-4 p-4 bg-gradient-to-r from-orange-50 to-red-50 rounded-xl border border-orange-100">
                                        <label className="toggle-switch">
                                            <input 
                                                type="checkbox" 
                                                checked={showTrending}
                                                onChange={(e) => setShowTrending(e.target.checked)}
                                            />
                                            <span className="toggle-slider"></span>
                                        </label>
                                        <span className="text-sm font-semibold text-gray-700">
                                            {showTrending ? '✅ Show Trending Only' : '📊 Show All Products'}
                                        </span>
                                    </div>
                                </div>
                                
                                {/* Quick Actions */}
                                <div className="flex flex-col justify-between">
                                    <label className="form-label text-base font-semibold text-gray-700 flex items-center gap-2 mb-3">
                                        <span className="text-2xl">⚡</span>
                                        Quick Actions
                                    </label>
                                    <button 
                                        onClick={() => {
                                            setSelectedRegion('All');
                                            setSelectedCategory('All');
                                            setShowTrending(false);
                                        }}
                                        className="btn btn-primary w-full h-12 text-base font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200"
                                    >
                                        🔄 Reset All Filters
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        {/* Dashboard Metrics */}
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-16">
                            {/* Total Products */}
                            <div className="metric-card group hover:scale-105 transition-all duration-300">
                                {isDataLoaded ? (
                                    <>
                                        <div className="flex items-center justify-between mb-6">
                                            <div className="p-4 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl shadow-lg">
                                                <svg className="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 20 20">
                                                    <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z" />
                                                </svg>
                                            </div>
                                            <div className="text-right">
                                                <div className="metric-change positive flex items-center gap-1 bg-green-50 px-3 py-1 rounded-full">
                                                    <svg className="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                                        <path fillRule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clipRule="evenodd" />
                                                    </svg>
                                                    +12%
                                                </div>
                                            </div>
                                        </div>
                                        <h3 className="metric-label">Total Products</h3>
                                        <p className="metric-value">{productSummary.length}</p>
                                        <div className="mt-2 text-sm text-gray-500">
                                            {showTrending ? 'Trending products' : 'Across all regions'}
                                        </div>
                                    </>
                                ) : (
                                    <SkeletonLoader type="metrics" />
                                )}
                            </div>
                            
                            {/* Total Mentions */}
                            <div className="metric-card group">
                                {isDataLoaded ? (
                                    <>
                                        <div className="flex items-center justify-between mb-4">
                                            <div className="p-3 bg-gradient-to-br from-green-500 to-green-600 rounded-xl">
                                                <svg className="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                                    <path fillRule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clipRule="evenodd" />
                                                </svg>
                                            </div>
                                            <div className="text-right">
                                                <div className="metric-change positive">
                                                    <svg className="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                                        <path fillRule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clipRule="evenodd" />
                                                    </svg>
                                                    +24%
                                                </div>
                                            </div>
                                        </div>
                                        <h3 className="metric-label">Total Mentions</h3>
                                        <p className="metric-value">
                                            {productSummary.reduce((sum, product) => sum + product.totalMentions, 0).toLocaleString()}
                                        </p>
                                        <div className="mt-2 text-sm text-gray-500">
                                            On social media in the last 30 days
                                        </div>
                                    </>
                                ) : (
                                    <SkeletonLoader type="metrics" />
                                )}
                            </div>
                            
                            {/* Average Sentiment */}
                            <div className="metric-card group">
                                {isDataLoaded ? (
                                    <>
                                        <div className="flex items-center justify-between mb-4">
                                            <div className="p-3 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl">
                                                <svg className="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                                    <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 100-2 1 1 0 000 2zm7-1a1 1 0 11-2 0 1 1 0 012 0zm-.464 5.535a1 1 0 10-1.415-1.414 3 3 0 01-4.242 0 1 1 0 00-1.415 1.414 5 5 0 007.072 0z" clipRule="evenodd" />
                                                </svg>
                                            </div>
                                            <div className="text-right">
                                                <div className="metric-change positive">
                                                    <svg className="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                                        <path fillRule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clipRule="evenodd" />
                                                    </svg>
                                                    +8%
                                                </div>
                                            </div>
                                        </div>
                                        <h3 className="metric-label">Average Sentiment</h3>
                                        <div className="flex items-center">
                                            <p className="metric-value">
                                                {productSummary.length > 0 ? 
                                                    (productSummary.reduce((sum, product) => 
                                                        sum + parseFloat(product.positiveSentimentPercent), 0) / productSummary.length).toFixed(1) + '%' : 
                                                    '0%'
                                                }
                                            </p>
                                        </div>
                                        <div className="mt-2 text-sm text-gray-500">
                                            Based on sentiment analysis
                                        </div>
                                    </>
                                ) : (
                                    <SkeletonLoader type="metrics" />
                                )}
                            </div>
                            
                            {/* Trending Products */}
                            <div className="metric-card group">
                                {isDataLoaded ? (
                                    <>
                                        <div className="flex items-center justify-between mb-4">
                                            <div className="p-3 bg-gradient-to-br from-orange-500 to-red-500 rounded-xl">
                                                <svg className="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                                    <path fillRule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z" clipRule="evenodd" />
                                                </svg>
                                            </div>
                                            <div className="text-right">
                                                <div className="metric-change positive">
                                                    <svg className="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                                        <path fillRule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clipRule="evenodd" />
                                                    </svg>
                                                    +35%
                                                </div>
                                            </div>
                                        </div>
                                        <h3 className="metric-label">Trending Products</h3>
                                        <p className="metric-value">
                                            {productSummary.filter(product => product.isTrending).length}
                                        </p>
                                        <div className="mt-2 text-sm text-gray-500">
                                            Products with high engagement
                                        </div>
                                    </>
                                ) : (
                                    <SkeletonLoader type="metrics" />
                                )}
                            </div>
                        </div>
                        
                        {/* Product Listings */}
                        <div className="mb-12">
                            <div className="flex items-center justify-between mb-8">
                                <div>
                                    <h2 className="text-3xl font-bold text-gray-900 mb-2">
                                        {showTrending ? '🔥 Trending Products' : '📊 Product Analytics'} 
                                        {selectedRegion !== 'All' && selectedRegion.startsWith('type:') ? 
                                            ` in ${selectedRegion.split(':')[1]} Cities` : 
                                            selectedRegion !== 'All' ? ` in ${selectedRegion}` : ''}
                                        {selectedCategory !== 'All' ? ` - ${selectedCategory}` : ''}
                                    </h2>
                                    <p className="text-lg text-gray-600">
                                        {showTrending ? 
                                            'Products with exceptional market momentum and consumer engagement' : 
                                            'Comprehensive insights across product categories and regional markets'
                                        }
                                    </p>
                                </div>
                                <div className="hidden md:flex items-center gap-4">
                                    <div className="flex items-center gap-2 text-sm font-medium text-gray-600">
                                        <div className="w-3 h-3 bg-indigo-500 rounded-full"></div>
                                        {productSummary.length} Products Found
                                    </div>
                                    <select className="form-select px-4 py-2 text-sm border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500">
                                        <option>Sort by Engagement</option>
                                        <option>Sort by Sentiment</option>
                                        <option>Sort by Trending</option>
                                        <option>Sort by Mentions</option>
                                    </select>
                                </div>
                            </div>
                            
                            {!isDataLoaded ? (
                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
                                    {[...Array(8)].map((_, index) => (
                                        <SkeletonLoader key={index} type="product" />
                                    ))}
                                </div>
                            ) : productSummary.length === 0 ? (
                                <div className="text-center py-16">
                                    <div className="bg-gradient-to-br from-indigo-50 to-purple-50 rounded-3xl p-12 border border-indigo-100">
                                        <div className="w-24 h-24 bg-gradient-to-br from-indigo-100 to-purple-100 rounded-full flex items-center justify-center mx-auto mb-6">
                                            <svg className="w-12 h-12 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.462.85-6.127 2.263C4.96 18.146 4.01 19 3 19a2 2 0 01-2-2 2 2 0 012-2c.96 0 1.83-.685 2.126-1.482A7.99 7.99 0 0112 9c4.418 0 8 3.582 8 8 0 1.103-.897 2-2 2-1.01 0-1.96-.854-2.873-1.737z" />
                                            </svg>
                                        </div>
                                        <h3 className="text-2xl font-bold text-gray-900 mb-4">No Products Found</h3>
                                        <p className="text-lg text-gray-600 mb-6 max-w-md mx-auto">
                                            We couldn't find any products matching your current filter criteria. Try adjusting your search parameters.
                                        </p>
                                        <button 
                                            onClick={() => {
                                                setSelectedRegion('All');
                                                setSelectedCategory('All');
                                                setShowTrending(false);
                                            }}
                                            className="btn btn-primary px-8 py-3 text-lg font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200"
                                        >
                                            🔄 Reset Filters
                                        </button>
                                    </div>
                                </div>
                            ) : (
                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
                                    {productSummary.map((product) => (
                                        <ProductCard 
                                            key={product.id} 
                                            product={product} 
                                            onClick={() => handleProductClick(product)}
                                            getRecommendationClass={getRecommendationClass}
                                        />
                                    ))}
                                </div>
                            )}
                        </div>
                    </main>
                    
                    {/* Minimalistic Footer */}
                    <footer className="bg-gray-900 text-white py-8 mt-16">
                        <div className="container mx-auto px-6">
                            <div className="flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0">
                                <div className="text-center md:text-left">
                                    <h3 className="text-lg font-semibold text-white mb-1">Indian Retail Trends</h3>
                                    <p className="text-gray-400 text-sm">AI-powered retail analytics platform</p>
                                </div>
                                
                                <div className="flex items-center space-x-6 text-sm text-gray-400">
                                    <span>© 2025 Retail Analytics</span>
                                    <span className="hidden md:inline">•</span>
                                    <span className="flex items-center space-x-2">
                                        <div className="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                                        <span>Live System</span>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </footer>
                </div>
            );
        };
        
        // Product Card Component
        const ProductCard = ({ product, onClick, getRecommendationClass }) => {
            const [chartRef, setChartRef] = React.useState(null);
            
            React.useEffect(() => {
                if (chartRef) {
                    const ctx = chartRef.getContext('2d');
                    
                    // Destroy existing chart if it exists
                    if (chartRef.chart) {
                        chartRef.chart.destroy();
                    }
                    
                    // Create new chart
                    chartRef.chart = new Chart(ctx, {
                        type: 'doughnut',
                        data: {
                            labels: ['Positive', 'Neutral', 'Negative'],
                            datasets: [{
                                data: [
                                    product.positiveSentimentPercent,
                                    product.neutralSentimentPercent,
                                    product.negativeSentimentPercent
                                ],
                                backgroundColor: ['#10b981', '#f59e0b', '#ef4444'],
                                borderWidth: 0
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    display: false
                                },
                                tooltip: {
                                    callbacks: {
                                        label: function(context) {
                                            return context.label + ': ' + context.raw + '%';
                                        }
                                    }
                                }
                            },
                            cutout: '70%'
                        }
                    });
                }
                
                return () => {
                    if (chartRef && chartRef.chart) {
                        chartRef.chart.destroy();
                    }
                };
            }, [chartRef, product]);
            
            // Get recommendation and determine its class
            const firstDataItem = product.data[0] || {};
            const recommendation = firstDataItem.recommendation || 'Standard Stock Levels';
            const recommendationClass = getRecommendationClass(recommendation);
            
            return (
                <div className="product-card bg-white shadow-md overflow-hidden relative card cursor-pointer" onClick={onClick}>
                    {product.isTrending && (
                        <div className="trending-badge">
                            <svg className="inline-block w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                <path fillRule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z" clipRule="evenodd" />
                            </svg>
                            Trending
                        </div>
                    )}
                    
                    <div className="p-4">
                        <div className="flex justify-between items-start mb-3">
                            <div>
                                <h3 className="font-semibold text-lg text-gray-900">{product.name}</h3>
                                <p className="text-sm text-gray-500">{product.category}</p>
                            </div>
                            <span className="bg-indigo-100 text-indigo-800 text-xs font-medium px-2.5 py-0.5 rounded-full">
                                {product.totalMentions.toLocaleString()} mentions
                            </span>
                        </div>
                        
                        <div className="flex justify-between items-center mb-4">
                            <div className="h-20 w-20">
                                <canvas ref={setChartRef}></canvas>
                            </div>
                            <div className="text-right">
                                <div className="flex items-center justify-end mb-1">
                                    <span className="w-3 h-3 bg-green-500 rounded-full mr-1"></span>
                                    <span className="text-sm">{product.positiveSentimentPercent}%</span>
                                </div>
                                <div className="flex items-center justify-end mb-1">
                                    <span className="w-3 h-3 bg-yellow-500 rounded-full mr-1"></span>
                                    <span className="text-sm">{product.neutralSentimentPercent}%</span>
                                </div>
                                <div className="flex items-center justify-end">
                                    <span className="w-3 h-3 bg-red-500 rounded-full mr-1"></span>
                                    <span className="text-sm">{product.negativeSentimentPercent}%</span>
                                </div>
                            </div>
                        </div>
                        
                        <div className={`${recommendationClass} text-white px-3 py-2 rounded-md text-sm font-medium`}>
                            {recommendation}
                        </div>
                        
                        <div className="mt-3 text-xs text-gray-500">
                            Popular in {product.regionsCount} {product.regionsCount === 1 ? 'region' : 'regions'}
                            {product.regions.length > 0 && (
                                <span className="block mt-1 truncate">
                                    Top: {product.regions.slice(0, 2).join(', ')}
                                    {product.regions.length > 2 && ' & more'}
                                </span>
                            )}
                        </div>
                    </div>
                </div>
            );
        };
        
        // Product Detail Modal Component
        const ProductDetailModal = ({ product, onClose, getRecommendationClass }) => {
            const [activeTab, setActiveTab] = React.useState('overview');
            const [chartRef, setChartRef] = React.useState(null);
            const [demoChartRef, setDemoChartRef] = React.useState(null);
            
            console.log('ProductDetailModal rendered, activeTab:', activeTab);
            
            React.useEffect(() => {
                if (chartRef) {
                    const ctx = chartRef.getContext('2d');
                    
                    // Destroy existing chart if it exists
                    if (chartRef.chart) {
                        chartRef.chart.destroy();
                    }
                    
                    // Create sentiment chart
                    chartRef.chart = new Chart(ctx, {
                        type: 'pie',
                        data: {
                            labels: ['Positive', 'Neutral', 'Negative'],
                            datasets: [{
                                data: [
                                    product.positiveSentimentPercent,
                                    product.neutralSentimentPercent,
                                    product.negativeSentimentPercent
                                ],
                                backgroundColor: ['#10b981', '#f59e0b', '#ef4444'],
                                borderWidth: 0
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'right'
                                },
                                tooltip: {
                                    callbacks: {
                                        label: function(context) {
                                            return context.label + ': ' + context.raw + '%';
                                        }
                                    }
                                }
                            }
                        }
                    });
                }
                
                if (demoChartRef && product.data && product.data.length > 0) {
                    const ctx = demoChartRef.getContext('2d');
                    
                    // Destroy existing chart if it exists
                    if (demoChartRef.chart) {
                        demoChartRef.chart.destroy();
                    }
                    
                    // Get age group data from the first product data item
                    const firstDataItem = product.data[0];
                    if (firstDataItem && firstDataItem.demographics && firstDataItem.demographics.age_groups) {
                        const ageGroups = firstDataItem.demographics.age_groups;
                        
                        // Create demographics chart
                        demoChartRef.chart = new Chart(ctx, {
                            type: 'bar',
                            data: {
                                labels: Object.keys(ageGroups),
                                datasets: [{
                                    label: 'Age Distribution',
                                    data: (() => {
                                        const total = Object.values(ageGroups).reduce((sum, count) => sum + count, 0);
                                        return Object.values(ageGroups).map(count => total > 0 ? ((count / total) * 100).toFixed(1) : 0);
                                    })(),
                                    backgroundColor: 'rgba(99, 102, 241, 0.7)',
                                    borderColor: 'rgba(99, 102, 241, 1)',
                                    borderWidth: 1
                                }]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                scales: {
                                    y: {
                                        beginAtZero: true,
                                        max: 50,
                                        ticks: {
                                            callback: function(value) {
                                                return value + '%';
                                            }
                                        }
                                    }
                                },
                                plugins: {
                                    legend: {
                                        display: false
                                    },
                                    tooltip: {
                                        callbacks: {
                                            label: function(context) {
                                                return context.raw + '%';
                                            }
                                        }
                                    }
                                }
                            }
                        });
                    }
                }
                
                return () => {
                    if (chartRef && chartRef.chart) {
                        chartRef.chart.destroy();
                    }
                    if (demoChartRef && demoChartRef.chart) {
                        demoChartRef.chart.destroy();
                    }
                };
            }, [chartRef, demoChartRef, product]);
            
            // Get first data item for detailed information
            const firstDataItem = product.data && product.data.length > 0 ? product.data[0] : {};
            const recommendation = firstDataItem.recommendation || 'Standard Stock Levels';
            const recommendationDetails = firstDataItem.recommendation_details || 'No additional details available.';
            const marketingRecommendation = firstDataItem.marketing_recommendation || 'Consider targeted marketing campaigns based on regional preferences.';
            const recommendationClass = getRecommendationClass(recommendation);
            
            // Get sample posts from all data items
            const samplePosts = product.data ? product.data.reduce((posts, item) => {
                if (item.sample_posts && item.sample_posts.length > 0) {
                    posts.push(...item.sample_posts);
                }
                return posts;
            }, []).slice(0, 5) : [];
            
            return (
                <div className="fixed inset-0 bg-black bg-opacity-50 z-[1000] flex justify-center items-center p-4">
                    <div className="bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden">
                        <div className="flex justify-between items-center p-6 border-b">
                            <div>
                                <h2 className="text-2xl font-bold text-gray-900">{product.name}</h2>
                                <p className="text-gray-500">{product.category}</p>
                            </div>
                            <button 
                                onClick={onClose}
                                className="text-gray-400 hover:text-gray-500"
                            >
                                <svg className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                                </svg>
                            </button>
                        </div>
                        
                        <div className="border-b">
                            <nav className="flex">
                                <button
                                    style={{ cursor: 'pointer', pointerEvents: 'auto', zIndex: 100 }}
                                    className={`px-4 py-3 text-sm font-medium ${
                                        activeTab === 'overview' 
                                            ? 'border-b-2 border-indigo-500 text-indigo-600' 
                                            : 'text-gray-500 hover:text-gray-700'
                                    }`}
                                    onClick={() => {
                                        console.log('Overview tab clicked');
                                        setActiveTab('overview');
                                    }}
                                >
                                    Overview
                                </button>
                                <button
                                    style={{ cursor: 'pointer', pointerEvents: 'auto', zIndex: 100 }}
                                    className={`px-4 py-3 text-sm font-medium ${
                                        activeTab === 'insights' 
                                            ? 'border-b-2 border-indigo-500 text-indigo-600' 
                                            : 'text-gray-500 hover:text-gray-700'
                                    }`}
                                    onClick={() => {
                                        console.log('Insights tab clicked');
                                        setActiveTab('insights');
                                    }}
                                >
                                    Insights & Recommendations
                                </button>
                                <button
                                    style={{ cursor: 'pointer', pointerEvents: 'auto', zIndex: 100 }}
                                    className={`px-4 py-3 text-sm font-medium ${
                                        activeTab === 'posts' 
                                            ? 'border-b-2 border-indigo-500 text-indigo-600' 
                                            : 'text-gray-500 hover:text-gray-700'
                                    }`}
                                    onClick={() => {
                                        console.log('Posts tab clicked');
                                        setActiveTab('posts');
                                    }}
                                >
                                    Sample Posts
                                </button>
                            </nav>
                        </div>
                        
                        <div className="p-6 overflow-y-auto" style={{ maxHeight: 'calc(90vh - 130px)' }}>
                            {activeTab === 'overview' && (
                                <div>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                        <div className="bg-gray-50 rounded-lg p-4">
                                            <h3 className="text-lg font-medium mb-4">Sentiment Analysis</h3>
                                            <div className="chart-container">
                                                <canvas ref={setChartRef}></canvas>
                                            </div>
                                        </div>
                                        
                                        <div className="bg-gray-50 rounded-lg p-4">
                                            <h3 className="text-lg font-medium mb-4">Demographics</h3>
                                            <div className="chart-container">
                                                <canvas ref={setDemoChartRef}></canvas>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                                        <div className="bg-gray-50 rounded-lg p-4">
                                            <h3 className="text-sm font-medium text-gray-500 mb-1">Total Mentions</h3>
                                            <p className="text-2xl font-bold">{product.totalMentions.toLocaleString()}</p>
                                        </div>
                                        
                                        <div className="bg-gray-50 rounded-lg p-4">
                                            <h3 className="text-sm font-medium text-gray-500 mb-1">Regions</h3>
                                            <p className="text-2xl font-bold">{product.regionsCount}</p>
                                            <p className="text-xs text-gray-500 mt-1">
                                                {product.regions.slice(0, 3).join(', ')}
                                                {product.regions.length > 3 && ' & more'}
                                            </p>
                                        </div>
                                        
                                        <div className="bg-gray-50 rounded-lg p-4">
                                            <h3 className="text-sm font-medium text-gray-500 mb-1">Trending Status</h3>
                                            <p className="text-2xl font-bold flex items-center">
                                                {product.isTrending ? (
                                                    <>
                                                        <svg className="w-6 h-6 text-indigo-600 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                                            <path fillRule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z" clipRule="evenodd" />
                                                        </svg>
                                                        Trending
                                                    </>
                                                ) : (
                                                    'Not Trending'
                                                )}
                                            </p>
                                        </div>
                                    </div>
                                    
                                    <div className="bg-gray-50 rounded-lg p-4 mb-6">
                                        <h3 className="text-lg font-medium mb-2">Popular Regions</h3>
                                        <div className="grid grid-cols-2 md:grid-cols-4 gap-2">
                                            {product.regions.slice(0, 8).map((region, index) => (
                                                <div key={index} className="bg-white rounded-md p-2 text-center">
                                                    <span className="text-sm">{region}</span>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                    
                                    <div className="bg-gray-50 rounded-lg p-4">
                                        <h3 className="text-lg font-medium mb-2">Product Tags</h3>
                                        <div className="flex flex-wrap gap-2">
                                            {firstDataItem.tags && firstDataItem.tags.length > 0 ? firstDataItem.tags.map((tag, index) => (
                                                <span key={index} className="bg-indigo-100 text-indigo-800 text-xs font-medium px-2.5 py-1 rounded-full">
                                                    #{tag}
                                                </span>
                                            )) : (
                                                <span className="text-sm text-gray-500">No tags available</span>
                                            )}
                                        </div>
                                    </div>
                                </div>
                            )}
                            
                            {activeTab === 'insights' && (
                                <div>
                                    <div className="bg-gray-50 rounded-lg p-6 mb-6">
                                        <h3 className="text-lg font-medium mb-2">Inventory Recommendation</h3>
                                        <div className={`${recommendationClass} text-white px-4 py-2 rounded-md text-base font-medium mb-3 inline-block`}>
                                            {recommendation}
                                        </div>
                                        <p className="text-gray-700">{recommendationDetails}</p>
                                    </div>
                                    
                                    <div className="bg-gray-50 rounded-lg p-6 mb-6">
                                        <h3 className="text-lg font-medium mb-2">Marketing Strategy</h3>
                                        <p className="text-gray-700">{marketingRecommendation}</p>
                                        
                                        <h4 className="font-medium mt-4 mb-2">Suggested Hashtags</h4>
                                        <div className="flex flex-wrap gap-2">
                                            {(() => {
                                                // Generate relevant hashtags based on product data
                                                const baseHashtags = ['#retail', '#shopping', '#trends', '#india'];
                                                const categoryHashtags = [`#${product.category.toLowerCase().replace(/\s+/g, '')}`];
                                                const productHashtags = [`#${product.name.toLowerCase().replace(/\s+/g, '').replace(/[^a-z0-9]/g, '')}`];
                                                const regionHashtags = product.regions.slice(0, 2).map(region => `#${region.toLowerCase().replace(/\s+/g, '')}`);
                                                const trendingHashtags = product.isTrending ? ['#trending', '#viral'] : ['#discover'];
                                                const tagHashtags = firstDataItem.tags ? firstDataItem.tags.slice(0, 3).map(tag => `#${tag}`) : [];
                                                
                                                const allHashtags = [...baseHashtags, ...categoryHashtags, ...productHashtags, ...regionHashtags, ...trendingHashtags, ...tagHashtags];
                                                
                                                return allHashtags.slice(0, 8).map((hashtag, index) => (
                                                    <span key={index} className="bg-indigo-100 text-indigo-800 text-xs font-medium px-2.5 py-1 rounded-full">
                                                        {hashtag}
                                                    </span>
                                                ));
                                            })()}
                                        </div>
                                    </div>
                                    
                                    <div className="bg-gray-50 rounded-lg p-6 mb-6">
                                        <h3 className="text-lg font-medium mb-4">Target Demographic</h3>
                                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                            <div className="bg-white rounded-lg p-4 shadow-sm">
                                                <h4 className="font-semibold mb-4 text-indigo-700 flex items-center">
                                                    <svg className="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                                    </svg>
                                                    Age Groups
                                                </h4>
                                                {firstDataItem.demographics && firstDataItem.demographics.age_groups ? (
                                                    <div className="space-y-3">
                                                        {(() => {
                                                            const ageGroups = firstDataItem.demographics.age_groups;
                                                            const total = Object.values(ageGroups).reduce((sum, count) => sum + count, 0);
                                                            
                                                            return Object.entries(ageGroups)
                                                                .sort((a, b) => b[1] - a[1])
                                                                .map(([ageGroup, count], index) => {
                                                                    const percentage = total > 0 ? (count / total * 100) : 0;
                                                                    return (
                                                                        <div key={index} className="relative">
                                                                            <div className="flex justify-between items-center mb-1">
                                                                                <span className="text-sm font-medium text-gray-700">{ageGroup} years</span>
                                                                                <span className="text-sm font-bold text-indigo-600">{percentage.toFixed(1)}%</span>
                                                                            </div>
                                                                            <div className="w-full bg-gray-200 rounded-full h-3 overflow-hidden">
                                                                                <div 
                                                                                    className="bg-gradient-to-r from-indigo-500 to-purple-600 h-3 rounded-full transition-all duration-1000 ease-out"
                                                                                    style={{ width: `${percentage}%` }}
                                                                                ></div>
                                                                            </div>
                                                                        </div>
                                                                    );
                                                                });
                                                        })()}
                                                    </div>
                                                ) : (
                                                    <div className="text-center py-6">
                                                        <svg className="w-12 h-12 text-gray-300 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                                                        </svg>
                                                        <p className="text-sm text-gray-500">Age group data not available</p>
                                                    </div>
                                                )}
                                            </div>
                                            
                                            <div className="bg-white rounded-lg p-4 shadow-sm">
                                                <h4 className="font-semibold mb-4 text-indigo-700 flex items-center">
                                                    <svg className="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                                                    </svg>
                                                    Gender Distribution
                                                </h4>
                                                {firstDataItem.demographics && firstDataItem.demographics.gender ? (
                                                    <div className="space-y-4">
                                                        {(() => {
                                                            const genderData = firstDataItem.demographics.gender;
                                                            const total = Object.values(genderData).reduce((sum, count) => sum + count, 0);
                                                            
                                                            return Object.entries(genderData).map(([gender, count], index) => {
                                                                const percentage = total > 0 ? (count / total * 100) : 0;
                                                                return (
                                                                    <div key={index} className="relative">
                                                                        <div className="flex justify-between items-center mb-2">
                                                                            <div className="flex items-center">
                                                                                <div className={`w-3 h-3 rounded-full mr-2 ${gender === 'male' ? 'bg-blue-500' : 'bg-pink-500'}`}></div>
                                                                                <span className="text-sm font-medium text-gray-700 capitalize">{gender}</span>
                                                                            </div>
                                                                            <span className="text-sm font-bold text-gray-800">{percentage.toFixed(1)}%</span>
                                                                        </div>
                                                                        <div className="w-full bg-gray-200 rounded-full h-3 overflow-hidden">
                                                                            <div 
                                                                                className={`h-3 rounded-full transition-all duration-1000 ease-out ${
                                                                                    gender === 'male' ? 'bg-gradient-to-r from-blue-400 to-blue-600' : 'bg-gradient-to-r from-pink-400 to-pink-600'
                                                                                }`}
                                                                                style={{ width: `${percentage}%` }}
                                                                            ></div>
                                                                        </div>
                                                                    </div>
                                                                );
                                                            });
                                                        })()}
                                                    </div>
                                                ) : (
                                                    <div className="text-center py-6">
                                                        <svg className="w-12 h-12 text-gray-300 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                                                        </svg>
                                                        <p className="text-sm text-gray-500">Gender data not available</p>
                                                    </div>
                                                )}
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div className="bg-gray-50 rounded-lg p-6">
                                        <h3 className="text-lg font-medium mb-4 flex items-center">
                                            <svg className="w-6 h-6 mr-2 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                                            </svg>
                                            Key Insights
                                        </h3>
                                        
                                        <div className="space-y-4">
                                            <div className="bg-white rounded-lg p-4 border-l-4 border-green-500 shadow-sm">
                                                <div className="flex items-start">
                                                    <div className="flex-shrink-0">
                                                        <svg className="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                                                        </svg>
                                                    </div>
                                                    <div className="ml-3">
                                                        <h4 className="text-base font-semibold text-green-800">Sentiment Analysis</h4>
                                                        <p className="text-sm text-gray-700 mt-1 leading-relaxed">
                                                            This product has <span className="font-semibold text-green-700">{product.positiveSentimentPercent}% positive sentiment</span>, indicating 
                                                            <span className="font-medium">
                                                                {parseFloat(product.positiveSentimentPercent) > 70 ? ' excellent' : parseFloat(product.positiveSentimentPercent) > 50 ? ' good' : ' moderate'} 
                                                            </span> customer satisfaction. 
                                                            {parseFloat(product.negativeSentimentPercent) > 20 ? 
                                                                ` However, ${product.negativeSentimentPercent}% negative sentiment suggests areas for improvement.` : 
                                                                ' Negative sentiment is relatively low, which is a good sign.'}
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div className="bg-white rounded-lg p-4 border-l-4 border-blue-500 shadow-sm">
                                                <div className="flex items-start">
                                                    <div className="flex-shrink-0">
                                                        <svg className="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                                                        </svg>
                                                    </div>
                                                    <div className="ml-3">
                                                        <h4 className="text-base font-semibold text-blue-800">Regional Performance</h4>
                                                        <p className="text-sm text-gray-700 mt-1 leading-relaxed">
                                                            This product is popular across <span className="font-semibold text-blue-700">{product.regionsCount} regions</span>, with strongest performance in 
                                                            <span className="font-medium"> {product.regions.slice(0, 2).join(' and ')}</span>.
                                                            {product.regionsCount > 5 ? ' Wide geographic appeal suggests potential for national marketing campaigns.' : 
                                                             ' Consider targeted marketing in these specific regions.'}
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div className="bg-white rounded-lg p-4 border-l-4 border-purple-500 shadow-sm">
                                                <div className="flex items-start">
                                                    <div className="flex-shrink-0">
                                                        <svg className="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2m-9 2h10a2 2 0 012 2v10a2 2 0 01-2 2H6a2 2 0 01-2-2V8a2 2 0 012-2z" />
                                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 12l2 2 4-4" />
                                                        </svg>
                                                    </div>
                                                    <div className="ml-3">
                                                        <h4 className="text-base font-semibold text-purple-800">Social Media Engagement</h4>
                                                        <p className="text-sm text-gray-700 mt-1 leading-relaxed">
                                                            With <span className="font-semibold text-purple-700">{product.totalMentions.toLocaleString()} total mentions</span>, this product has 
                                                            <span className="font-medium">
                                                                {product.totalMentions > 1000 ? ' high' : product.totalMentions > 500 ? ' moderate' : ' low'} 
                                                            </span> social media engagement.
                                                            {product.isTrending ? 
                                                                ' The trending status indicates growing popularity that should be leveraged in marketing.' : 
                                                                ' Consider social media campaigns to increase visibility and engagement.'}
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}
                            
                            {activeTab === 'posts' && (
                                <div>
                                    <h3 className="text-lg font-medium mb-4">Sample Social Media Posts</h3>
                                    
                                    {samplePosts.length > 0 ? (
                                        <div className="space-y-4">
                                            {samplePosts.map((post, index) => {
                                                // Determine sentiment based on keywords in the post text
                                                const postText = typeof post === 'string' ? post : (post.text || '');
                                                const sentiment = postText.toLowerCase().includes('amazing') || postText.toLowerCase().includes('love') || postText.toLowerCase().includes('great') || postText.toLowerCase().includes('excellent') ? 'positive' :
                                                                postText.toLowerCase().includes('disappointed') || postText.toLowerCase().includes('bad') || postText.toLowerCase().includes('worst') || postText.toLowerCase().includes('hate') ? 'negative' : 'neutral';
                                                
                                                // Generate realistic social media data
                                                const platforms = ['Instagram', 'Facebook', 'Twitter', 'Reddit'];
                                                const usernames = ['fashionista_riya', 'mumbai_shopper', 'style_blogger_dev', 'trendy_priya', 'shopping_queen_21', 'fashion_lover_ak'];
                                                const platform = platforms[index % platforms.length];
                                                const username = usernames[index % usernames.length];
                                                const likes = Math.floor(Math.random() * 500) + 10;
                                                const comments = Math.floor(Math.random() * 50) + 1;
                                                const shares = Math.floor(Math.random() * 20) + 1;
                                                const hoursAgo = Math.floor(Math.random() * 24) + 1;
                                                
                                                // Generate profile picture background color
                                                const profileColors = ['bg-blue-500', 'bg-purple-500', 'bg-pink-500', 'bg-green-500', 'bg-yellow-500', 'bg-red-500'];
                                                const profileColor = profileColors[index % profileColors.length];
                                                
                                                return (
                                                    <div 
                                                        key={index} 
                                                        className="bg-white border rounded-lg shadow-sm hover:shadow-md transition-shadow"
                                                    >
                                                        {/* Post Header */}
                                                        <div className="flex items-center p-4 border-b">
                                                            <div className={`w-10 h-10 ${profileColor} rounded-full flex items-center justify-center text-white font-semibold mr-3`}>
                                                                {username.charAt(0).toUpperCase()}
                                                            </div>
                                                            <div className="flex-1">
                                                                <div className="flex items-center">
                                                                    <span className="font-semibold text-gray-900">{username}</span>
                                                                    <span className="mx-2 text-gray-400">•</span>
                                                                    <span className="text-sm text-gray-500">{hoursAgo}h ago</span>
                                                                </div>
                                                                <div className="text-xs text-gray-400">{platform}</div>
                                                            </div>
                                                            <div className={`px-2 py-1 rounded-full text-xs font-medium ${
                                                                sentiment === 'positive' ? 'bg-green-100 text-green-700' : 
                                                                sentiment === 'negative' ? 'bg-red-100 text-red-700' : 
                                                                'bg-gray-100 text-gray-700'
                                                            }`}>
                                                                {sentiment === 'positive' ? '😊' : sentiment === 'negative' ? '😞' : '😐'}
                                                            </div>
                                                        </div>
                                                        
                                                        {/* Post Content */}
                                                        <div className="p-4">
                                                            <p className="text-gray-800 leading-relaxed">{postText}</p>
                                                        </div>
                                                        
                                                        {/* Engagement Metrics */}
                                                        <div className="px-4 py-3 border-t bg-gray-50 flex items-center justify-between text-sm text-gray-600">
                                                            <div className="flex items-center space-x-4">
                                                                <span className="flex items-center">
                                                                    <svg className="w-4 h-4 mr-1 text-red-500" fill="currentColor" viewBox="0 0 20 20">
                                                                        <path fillRule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clipRule="evenodd" />
                                                                    </svg>
                                                                    {likes}
                                                                </span>
                                                                <span className="flex items-center">
                                                                    <svg className="w-4 h-4 mr-1 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                                                                    </svg>
                                                                    {comments}
                                                                </span>
                                                                <span className="flex items-center">
                                                                    <svg className="w-4 h-4 mr-1 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z" />
                                                                    </svg>
                                                                    {shares}
                                                                </span>
                                                            </div>
                                                            <span className="text-xs text-gray-400">
                                                                {platform === 'Instagram' ? '#fashion #shopping' : 
                                                                 platform === 'Facebook' ? 'via Shopping Page' :
                                                                 platform === 'Twitter' ? '@retailtrends' :
                                                                 'r/IndianFashion'}
                                                            </span>
                                                        </div>
                                                    </div>
                                                );
                                            })}
                                        </div>
                                    ) : (
                                        <div className="bg-gray-50 rounded-lg p-6 text-center">
                                            <p className="text-gray-500">No sample posts available</p>
                                        </div>
                                    )}
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };
        
        // Skeleton Loader Component
        const SkeletonLoader = ({ type }) => {
            if (type === 'metrics') {
                return (
                    <div>
                        <div className="skeleton-loader h-5 w-24 mb-2"></div>
                        <div className="skeleton-loader h-8 w-16"></div>
                        <div className="skeleton-loader h-3 w-32 mt-2"></div>
                    </div>
                );
            } else if (type === 'product') {
                return (
                    <div className="bg-white rounded-lg shadow-md p-4 h-60">
                        <div className="skeleton-loader h-6 w-3/4 mb-2"></div>
                        <div className="skeleton-loader h-4 w-1/2 mb-4"></div>
                        
                        <div className="flex justify-between mb-4">
                            <div className="skeleton-loader h-20 w-20 rounded-full"></div>
                            <div className="space-y-2">
                                <div className="skeleton-loader h-4 w-16"></div>
                                <div className="skeleton-loader h-4 w-16"></div>
                                <div className="skeleton-loader h-4 w-16"></div>
                            </div>
                        </div>
                        
                        <div className="skeleton-loader h-8 w-full mb-3"></div>
                        <div className="skeleton-loader h-4 w-2/3"></div>
                    </div>
                );
            }
            
            return null;
        };
    </script>
</body>
</html>
